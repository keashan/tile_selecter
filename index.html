<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width initial-scale=1.0">
        <title>Tile Selector</title>

        <link rel="stylesheet" type="text/css" href="static/css/tile_selector.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    </head>
    <body>
        <h1 class="title">Tile Selector</h1>
        <div class="popup">
            <span onclick="closeFolder()">&times</span>
            <div class="popup-content">
                <h2>Tile Name</h2>
                <!-- <p>Tile Description</p> -->
                <div id="image-container"></div>
            </div>
        </div>
        <div class="content">
            <div class="tile" id="Field_Tile_CPRISB_Dark_Grey">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F01 NL.jpg" class="tile-image image1" alt="">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F02 NL.jpg" class="tile-image image2" alt="">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F03 NL.jpg" class="tile-image image3" alt="">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F04 NL.jpg" class="tile-image image4" alt="">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F05 NL.jpg" class="tile-image image5" alt="">
            </div>
            <div class="tile" id="Field_Tile_CPRISB_Dark_Grey2">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F01 NL.jpg" class="tile-image image1" alt="">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F02 NL.jpg" class="tile-image image2" alt="">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F03 NL.jpg" class="tile-image image3" alt="">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F04 NL.jpg" class="tile-image image4" alt="">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F05 NL.jpg" class="tile-image image5" alt="">
            </div>
            <div class="tile" id="Field_Tile_CPRISB_Dark_Grey">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F01 NL.jpg" class="tile-image image1" alt="">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F02 NL.jpg" class="tile-image image2" alt="">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F03 NL.jpg" class="tile-image image3" alt="">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F04 NL.jpg" class="tile-image image4" alt="">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F05 NL.jpg" class="tile-image image5" alt="">
            </div>
            <div class="tile" id="Field_Tile_CPRISB_Dark_Grey">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F01 NL.jpg" class="tile-image image1" alt="">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F02 NL.jpg" class="tile-image image2" alt="">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F03 NL.jpg" class="tile-image image3" alt="">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F04 NL.jpg" class="tile-image image4" alt="">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F05 NL.jpg" class="tile-image image5" alt="">
            </div>
            <div class="tile" id="Field_Tile_CPRISB_Dark_Grey">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F01 NL.jpg" class="tile-image image1" alt="">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F02 NL.jpg" class="tile-image image2" alt="">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F03 NL.jpg" class="tile-image image3" alt="">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F04 NL.jpg" class="tile-image image4" alt="">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F05 NL.jpg" class="tile-image image5" alt="">
            </div>
            <div class="tile" id="Field_Tile_CPRISB_Dark_Grey">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F01 NL.jpg" class="tile-image image1" alt="">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F02 NL.jpg" class="tile-image image2" alt="">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F03 NL.jpg" class="tile-image image3" alt="">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F04 NL.jpg" class="tile-image image4" alt="">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F05 NL.jpg" class="tile-image image5" alt="">
            </div>
            <div class="tile" id="Field_Tile_CPRISB_Dark_Grey">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F01 NL.jpg" class="tile-image image1" alt="">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F02 NL.jpg" class="tile-image image2" alt="">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F03 NL.jpg" class="tile-image image3" alt="">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F04 NL.jpg" class="tile-image image4" alt="">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F05 NL.jpg" class="tile-image image5" alt="">
            </div>
            <div class="tile" id="Field_Tile_CPRISB_Dark_Grey">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F01 NL.jpg" class="tile-image image1" alt="">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F02 NL.jpg" class="tile-image image2" alt="">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F03 NL.jpg" class="tile-image image3" alt="">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F04 NL.jpg" class="tile-image image4" alt="">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F05 NL.jpg" class="tile-image image5" alt="">
            </div>
            <div class="tile" id="Field_Tile_CPRISB_Dark_Grey">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F01 NL.jpg" class="tile-image image1" alt="">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F02 NL.jpg" class="tile-image image2" alt="">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F03 NL.jpg" class="tile-image image3" alt="">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F04 NL.jpg" class="tile-image image4" alt="">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F05 NL.jpg" class="tile-image image5" alt="">
            </div>
            <div class="tile" id="Field_Tile_CPRISB_Dark_Grey">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F01 NL.jpg" class="tile-image image1" alt="">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F02 NL.jpg" class="tile-image image2" alt="">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F03 NL.jpg" class="tile-image image3" alt="">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F04 NL.jpg" class="tile-image image4" alt="">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F05 NL.jpg" class="tile-image image5" alt="">
            </div>
            <div class="tile" id="Field_Tile_CPRISB_Dark_Grey">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F01 NL.jpg" class="tile-image image1" alt="">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F02 NL.jpg" class="tile-image image2" alt="">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F03 NL.jpg" class="tile-image image3" alt="">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F04 NL.jpg" class="tile-image image4" alt="">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F05 NL.jpg" class="tile-image image5" alt="">
            </div>
            <div class="tile" id="Field_Tile_CPRISB_Dark_Grey">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F01 NL.jpg" class="tile-image image1" alt="">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F02 NL.jpg" class="tile-image image2" alt="">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F03 NL.jpg" class="tile-image image3" alt="">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F04 NL.jpg" class="tile-image image4" alt="">
                <img src="static/images/Field_Tile_CPRISB_Dark_Grey/Field Tile CPRISB Dark Grey  12x12 F05 NL.jpg" class="tile-image image5" alt="">
            </div>
        </div>


        <script>
            document.querySelectorAll(".tile").forEach(tile => {
                tile.onclick=()=>{
                    openFolder(tile)
                }
            })
            function openFolder(tile) {
                let fld = tile.getAttribute("id")
                document.querySelector(".popup").style.display = "block";
                var folder = "static/images/" + fld + "/";

                $.ajax({
                    url : folder,
                    success: function (data) {
                        $(data).find("a").attr("href", function (i, val) {
                            if( val.match(/\.(jpe?g|png|gif|jpg)$/) ) { 
                                let img = document.querySelector("#image-container").appendChild(document.createElement("img"));
                                img.src = val;
                                img.className = "image";
                                let img1 = img.cloneNode(true);
                                let img2 = img.cloneNode(true);
                                let img3 = img.cloneNode(true);
                                img.classList.add("top-crop")
                                img1.classList.add("right-crop")
                                img2.classList.add("bottom-crop")
                                img3.classList.add("left-crop")
                                document.querySelector("#image-container").appendChild(img);
                                document.querySelector("#image-container").appendChild(img1);
                                document.querySelector("#image-container").appendChild(img2);
                                document.querySelector("#image-container").appendChild(img3);
                                // $("body").append( "<img src='"+ val +"'>" );
                            } 
                        });
                    }
                });
                // var xhr = new XMLHttpRequest();
                // xhr.open("GET", "static/images/" + fld, true);
                // xhr.responseType = 'document';
                // xhr.onload = () => {
                //   if (xhr.status === 200) {
                //     var elements = xhr.response.getElementsByTagName("a");
                //     for (x of elements) {
                //         console.log(x)
                //         if ( x.href.match(/\.(jpe?g|png|gif)$/) ) {
                //             let img = document.querySelector("#image-container").appendChild(document.createElement("img"));
                //             img.src = x.href;
                //             img.className = "image";
                //             let img1 = img.cloneNode(true);
                //             let img2 = img.cloneNode(true);
                //             let img3 = img.cloneNode(true);
                //             img.classList.add("top-crop")
                //             img1.classList.add("right-crop")
                //             img2.classList.add("bottom-crop")
                //             img3.classList.add("left-crop")
                //             document.querySelector("#image-container").appendChild(img);
                //             document.querySelector("#image-container").appendChild(img1);
                //             document.querySelector("#image-container").appendChild(img2);
                //             document.querySelector("#image-container").appendChild(img3);
                //       }
                //     };
                //   }
                //   else {
                //     alert('Request failed. Returned status of ' + xhr.status);
                //   }
                // }
                // xhr.send()

            }
            function closeFolder() {
                document.querySelector("#image-container").innerHTML = "";
                document.querySelector(".popup").style.display = "none";
            }



        </script>
    </body>
</html>